<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>Потеря связи с зондом Deep Impact в 2013 году</title>

  
  <link rel="stylesheet" href="/css/poole.css">
  <link rel="stylesheet" href="/css/hyde.css">
  <link rel="stylesheet" href="/css/poole-overrides.css">
  <link rel="stylesheet" href="/css/hyde-overrides.css">
  <link rel="stylesheet" href="/css/hyde-x.css">
  <link rel="stylesheet" href="/css/highlight/github.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="/css/custom.css">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/touch-icon-144-precomposed.png">
  <link href="/favicon.png" rel="icon">

  
  
  <link href="http://feeds.feedburner.com/not-a-kernel-guy" rel="alternate" type="application/rss+xml" title="Алексей Пахунов" />

  <meta name="description" content="Блог про космос, программирование и всякое разное.">
  <meta name="keywords" content="">
  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-1329392-1', 'auto');
    ga('send', 'pageview');
  </script>
  
</head>
<body>
<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      
      <h1>Алексей Пахунов</h1>
      <p class="lead">&hellip; также известный как &ldquo;Not a kernel guy&rdquo;</p>
    </div>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item"><a href="/">Блог</a></li>
      
      <li class="sidebar-nav-item"><a href="/post/">Архив</a></li>
      
      <li class="sidebar-nav-item"><a href="/about">Об авторе</a></li>
      
      <li class="sidebar-nav-item"><a href="http://feeds.feedburner.com/not-a-kernel-guy">Подписаться</a></li>
      
      <li class="sidebar-nav-item"><a href="https://feedburner.google.com/fb/a/mailverify?uri=not-a-kernel-guy&amp;loc=ru_RU">Рассылка</a></li>
      
    </ul>

    <ul class="sidebar-nav">
      <script>
        (function() {
          var cx = '009966018894572705542:ewu98_itf-q';
          var gcse = document.createElement('script');
          gcse.type = 'text/javascript';
          gcse.async = true;
          gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
              '//cse.google.com/cse/cse.js?cx=' + cx;
          var s = document.getElementsByTagName('script')[0];
          s.parentNode.insertBefore(gcse, s);
        })();
      </script>
      <gcse:searchbox-only></gcse:searchbox-only>
    </ul>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item">
      
      
      
      <a href="https://www.linkedin.com/in/alexpakhunov"><i class="fa fa-linkedin-square fa-3x"></i></a>
      
      
      
      
      
      <a href="http://feeds.feedburner.com/not-a-kernel-guy" type="application/rss+xml"><i class="fa fa-rss-square fa-3x"></i></a>
      </li>
    </ul>

    

    <p>Copyright &copy; 2006 - 2020 <a href="/license/">License</a><br/>
       Powered by <a href="http://gohugo.io">Hugo</a> and <a href="https://github.com/zyro/hyde-x">Hyde-X</a></p>
  </div>
</div>


<div class="content container">
  <div class="post">
    <h1 class="post-title">Потеря связи с зондом Deep Impact в 2013 году</h1>
    <span class="post-date">Feb 14, 2018 &middot; <a href="https://blog.not-a-kernel-guy.com/2018/02/14/epoxi/#disqus_thread">Comments</a>
    
    <br/>
    <a class="label" href="/tags/%D0%BA%D0%BE%D1%81%D0%BC%D0%BE%D1%81">Космос</a><a class="label" href="/tags/%D1%82%D0%B5%D1%85%D0%BD%D0%B8%D0%BA%D0%B0">Техника</a><a class="label" href="/tags/%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5">Программирование</a><a class="label" href="/tags/nasa">NASA</a>
    </span>
    <p>12 января 2005 года с мыса Канаверал стартовал зонд Deep Impact, созданный для
изучение внутреннего состава кометы 9P/Темпеля. Зонд достиг кометы в июле 2005
года, после чего разделился на импактор и пролетную часть. 4 июля 2005 года
370 килограммовый импактор успешно столкнулся с ядром кометы на скорости около
10.3 км/с, выбросив в космос здоровенное облако пыли:</p>

<p><a href="https://upload.wikimedia.org/wikipedia/commons/3/3e/Deep_Impact_HRI.jpeg"><img src="/2018/02/Deep_Impact_HRI.jpeg" alt="" title="Столкновение импактора с ядром кометы 9P/Темпеля" /></a></p>

<p>Согласно измерениям, проведенным космическим аппаратом <a href="https://en.wikipedia.org/wiki/Stardust_(spacecraft)">Stardust</a> в 2011
году, диаметр кратера, образовавшегося в результате столкновения, составил около
150 метров.</p>

<p>По завершению основной миссии, NASA направило зонд Deep Impact к комете
103P/Хартли в рамках расширенной миссии &ldquo;EPOXI&rdquo;. Пролет этой кометы
состоялся 4 ноября 2010 года:</p>

<p><img src="/2018/02/NASAHartley2Comet.jpg" alt="" /></p>

<p>В конце 2011 года, аппарат был отправлен на перехват астероида
<a href="https://en.wikipedia.org/wiki/(163249)_2002_GT">(163249) 2002 GT</a> пролет которого должен был состоятся в 2020 году. Однако
в августе 2013 года контакт с аппаратом был потерян:</p>

<blockquote>
<p><a href="http://epoxi.astro.umd.edu/1mission/status.shtml">3 сентября 2013</a>:<br />
&hellip; Связь с аппаратом утеряна между 11 и 14 августа (связь с аппаратом
поддерживается раз в неделю). Последний сеанс связи был проведен 8 августа.
Проведенное расследование позволило установить причину неполадки. Дальнейшие
усилия направлены на определение лучшего способа восстановить связь с
аппаратом.</p>

<p><a href="http://epoxi.astro.umd.edu/1mission/status.shtml">23 сентября 2013</a>:<br />
&hellip; все попытки передачи низкоуровневых аппаратных команд не увенчались
успехом. На этом все возможные сценарии восстановления связи с аппаратом были
исчерпаны. Мы рекомендовали NASA объявить аппарат утерянным. NASA официально
заявило об утере аппарата в четверг 19 сентября.</p>
</blockquote>

<p>Что же произошло? Wiki ссылается на <a href="https://news.nationalgeographic.com/news/2013/09/130920-deep-impact-ends-comet-mission-nasa-jpl/">статью в National Geographic</a>, которая
указывает на проблему с программным обеспечением зонда:</p>

<blockquote>
<p>Basically, it was a Y2K problem, where some software didn&rsquo;t roll over
the calendar date correctly&hellip; The spacecraft&rsquo;s fault-protection software
(ironically enough) would have misread any date after August 11, 2013,
triggering an endless series of computer reboots aboard Deep Impact.</p>
</blockquote>

<p>Гораздо более подробное описание нашлось на сайте <a href="https://llis.nasa.gov/lesson/10701">NASA Lessons Learned</a>.
Далее в моем переводе:</p>

<blockquote>
<p>Хотя точную причину потери аппарата невозможно установить с полной
уверенностью, команда управляющая полетом в Лаборатории реактивного движения
вместе с главным разработчиком аппарата обнаружили потенциальную проблему
с обработкой временных меток, которая могла привести к потере контроля над
ориентацией аппарата. Программное обеспечение зонда включает в себя функцию,
которая регистрирует и сохраняет в журнал все события, связанные с обработкой
сбоев, такие как обнаружение симптомов, обнаружение сбоев, реагирование на
сбой и сброс процессора. Функция вычисляет бортовое время в миллисекундах и
сохраняет его как целое число. Для этого, функция берет бортовое время в
секундах, представленное как 64 битное число с плавающей запятой, умножает его
на 10, и переводит его в 32 битное беззнаковое число. <strong>Код, выполняющий
преобразование, не защищен от целочисленного переполнения, при котором
результат не может быть корректно представлен 32 битным числом</strong>. Это произошло
когда бортовые часы достигли отметки 429496729.6 секунд, что соответствует 223
дню 2013 года. Начиная с этого момента, выполнение этой функции приводит к
ошибке вычисления с плавающей запятой, которая в конечном итоге вызывает сброс
процессора.</p>

<p>Эта ошибка преобразования числа с плавающей запятой в целое число представляет
присутствует в файловой системе главного и резервного полетного компьютера
зонда. Как только бортовое время пересекает отметку, запись в журнал первого
события обнаруженного менеджером сбоев, приведет с сбросу процессора.
Таким событием скорее всего было невинное сообщение о выходе звезды за
переделы поля зрения датчика системы звездной ориентации. В дальнейшем, ни
один из компьютеров не сможет успешно перезагрузится, так как попытка системы
защиты от сбоев перевести компьютер в безопасный режим вызовет очередной сброс
процессора. Зонд погрузится в бесконечный цикл перезагрузок и не сможет
выполнять полетные функции. Аппарат перестанет поддерживать ориентацию, так
кака система контроля двигателей ориентации тоже выведена из строя. Потеряв
возможность ориентировать себя в пространстве, аппарат не будет способен
поддерживать связь и не сможет заряжать батареи из-за неправильное ориентации
антенн и солнечных батарей. В конце концов, батареи разрядятся ниже порогового
значения, нагреватели останутся без электричества и аппарат станет полностью
неуправляемым.</p>
</blockquote>

<p>В сухом остатке получается, что код, предназначенный для защиты от сбоев, вызвал
сбой из-за довольно тривиальной ошибки. Так как ошибка скрывалась в общем коде,
проблема затронула оба полетных компьютера, полностью выведя аппарат из строя.
Более того, тестовая инфраструктура не отловила данную проблему, так как,
видимо, системное время не было достаточно далеко в будущем.</p>

<p>Также не очень понятен пассаж про файловую систему. Если буквально имеется ввиду
файловая система, то код этой файловой системы мог избежать тщательных проверок,
которым подвергается основное управляющее программное обеспечение.</p>

<p>Далее, в документе упоминаются другие инциденты, вызванные ошибками
переполнения:</p>

<blockquote>
<p>Подобные ошибки преобразования данных не редки и могут иметь катастрофические
последствия. Ракета Arian 5 самоликвидировалась во время первого тестового
полета в 1996 году, так как 64 разрядное число с плавающей точкой в системе
управления было слишком велико, чтобы быть представлено как 16 разрядное
знаковое целое. Неудача при попытке перехвата иракского Скада американской
ракетой Патриот привела к гибели 28 американских солдат в 1991 году. Она была
вызвана преобразованием времени в ограниченное 24 битное представление.
Так как способ обработки временных меток реализованный зондом Deep Impact
используется повсеместно, похожие проблемы могут затрагивать базовое
программное обеспечение, используемое другими проектами космического
назначения. Докладная записка, написанная Michael Sierchio, была разослана
29 другим проектам в Лаборатории реактивного движения, чтобы предупредить о
потенциальной уязвимости, скрывающейся в коде системы обработки сбоев.</p>
</blockquote>

<p>А вы проверяете свой код на отсутствие проблем с целочисленным переполнением?</p>
  </div>
  <div id="disqus_thread"></div>
</div>


<script type="text/javascript">
var disqus_shortname = "alexeypa";
(function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>



<script type="text/javascript">
    var disqus_config = function () {
        this.page.url = "https://blog.not-a-kernel-guy.com/2018/02/14/epoxi/";
        this.page.title = "Потеря связи с зондом Deep Impact в 2013 году";
    };
    var disqus_shortname = "alexeypa";
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>

