<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
	<meta name="generator" content="Hugo 0.124.1">
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>Алексей Пахунов</title>

  
  <link rel="stylesheet" href="/css/poole.css">
  <link rel="stylesheet" href="/css/hyde.css">
  <link rel="stylesheet" href="/css/poole-overrides.css">
  <link rel="stylesheet" href="/css/hyde-overrides.css">
  <link rel="stylesheet" href="/css/hyde-x.css">
  <link rel="stylesheet" href="/css/highlight/github.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="/css/custom.css">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/touch-icon-144-precomposed.png">
  <link href="/favicon.png" rel="icon">

  
  
  <link href="/index.xml" rel="alternate" type="application/rss+xml" title="Алексей Пахунов" />

  <meta name="description" content="Блог про космос, программирование и всякое разное.">
  <meta name="keywords" content="">
  
</head>
<body>
<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      
      <h1>Алексей Пахунов</h1>
      <p class="lead">&hellip; также известный как &ldquo;Not a kernel guy&rdquo;</p>
    </div>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item"><a href="/">Блог</a></li>
      
      <li class="sidebar-nav-item"><a href="/post/">Архив</a></li>
      
      <li class="sidebar-nav-item"><a href="/about">Об авторе</a></li>
      
      <li class="sidebar-nav-item"><a href="/index.xml">Подписаться на RSS канал</a></li>
      
      <li class="sidebar-nav-item"><a href="https://follow.it/fucjll?action=followPub">Почтовая рассылка</a></li>
      
    </ul>

    <ul class="sidebar-nav">
      <script>
        (function() {
          var cx = '009966018894572705542:ewu98_itf-q';
          var gcse = document.createElement('script');
          gcse.type = 'text/javascript';
          gcse.async = true;
          gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
              '//cse.google.com/cse/cse.js?cx=' + cx;
          var s = document.getElementsByTagName('script')[0];
          s.parentNode.insertBefore(gcse, s);
        })();
      </script>
      <gcse:searchbox-only></gcse:searchbox-only>
    </ul>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item">
      
      
      
      <a href="https://www.linkedin.com/in/alexpakhunov"><i class="fa fa-linkedin-square fa-3x"></i></a>
      
      
      
      
      
      <a href="/index.xml" type="application/rss+xml"><i class="fa fa-rss-square fa-3x"></i></a>
    </li>
    </ul>

    

    <p>Copyright &copy; 2006 - 2024 <a href="/license/">License</a><br/>
       Powered by <a href="http://gohugo.io">Hugo</a> and <a href="https://github.com/zyro/hyde-x">Hyde-X</a></p>

  </div>
</div>


<div class="content container">
  <div class="posts">
    
    <ul class="pagination">
  <li class="active">
    <span class="fa-lg"><a href="/page/20/" aria-label="Previous">
        <i class="fa fa-arrow-left" aria-hidden="true"></i>&nbsp;Новое
      </a></span>
  </li>

  <li class="active">
    <span class="fa-lg">
      <a href="/post/">Архив</a>
    <span>
  </li>

  <li class="active">
    <span class="fa-lg"><a href="/page/22/" aria-label="Next">
        Старое&nbsp;<i class="fa fa-arrow-right" aria-hidden="true"></i>
      </a></span>
  </li>
</ul>

    
    <div class="post">
      <h1 class="post-title">
        <a href="https://blog.not-a-kernel-guy.com/2013/01/09/1456/">Трассировка описателей. Вторая серия</a>
      </h1>
      <span class="post-date">Jan 9, 2013 &middot; <a href="https://blog.not-a-kernel-guy.com/2013/01/09/1456/#disqus_thread">Comments</a>
      
      <br/>
      <a class="label" href="/tags/%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0-%D0%B8%D1%81%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B9">Обработка исключений</a><a class="label" href="/tags/%D0%BE%D1%88%D0%B8%D0%B1%D0%BA%D0%B8">Ошибки</a><a class="label" href="/tags/windows">Windows</a><a class="label" href="/tags/wow64">Wow64</a><a class="label" href="/tags/x64">x64</a>
      </span>
      
      <p>Краткое содержание <a href="/2012/12/04/1437/">первой части</a>:</p>
<blockquote>
<p>Не получается продолжить выполнение кода после того, как было сгенерировано исключение STATUS_INVALID_HANDLE - почему-то портится сохраненный контекст процессора. В частности, не сохраняются non-volatile регистры esi и edi.</p>
</blockquote>
<p>Некто Indy засомневался в том, что происходит именно это. Следует сказать, что засомневался он не без оснований. На самом деле, способы возбудить исключение пользовательского режима из кода в ядре можно пересчитать по пальцам одной руки и все они формируют конекст процессора одинаково. Получается, что если бы регистры не сохранялись, то не работали бы все исключения, а не избирательно STATUS_INVALID_HANDLE.</p>
<p>Покопавшись в отладчике я понял в чем дело.</p>
      <a href="https://blog.not-a-kernel-guy.com/2013/01/09/1456/">Read On &rarr;</a>
      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="https://blog.not-a-kernel-guy.com/2012/12/27/1450/">Мир становится меньше</a>
      </h1>
      <span class="post-date">Dec 27, 2012 &middot; <a href="https://blog.not-a-kernel-guy.com/2012/12/27/1450/#disqus_thread">Comments</a>
      
      <br/>
      <a class="label" href="/tags/%D0%B2%D1%81%D1%8F%D0%BA%D0%B0%D1%8F-%D0%B2%D1%81%D1%8F%D1%87%D0%B8%D0%BD%D0%B0">Всякая всячина</a><a class="label" href="/tags/%D1%8E%D0%BC%D0%BE%D1%80">Юмор</a>
      </span>
      
      В аэропорту Lihue, Hawaii увидел прекрасное - 24 штуки настенных часов, которые, как я понимаю, призваны показать текущее время в каждой из существующих часовых зон. (Тут нужно заметить, что временных зон не 24, а где-то около 40. Более того, их число иногда меняется, но не будем придираться).
Текущее время в &hellip;
При взгляде на картинку у меня немедленно возникает два вопроса. Во-первых, кто это под Рейкъявиком профилонил переход на единое всеземное время?
      <a href="https://blog.not-a-kernel-guy.com/2012/12/27/1450/">Read On &rarr;</a>
      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="https://blog.not-a-kernel-guy.com/2012/12/11/1441/">Я составляю списки, а затем я составляю списки списков</a>
      </h1>
      <span class="post-date">Dec 11, 2012 &middot; <a href="https://blog.not-a-kernel-guy.com/2012/12/11/1441/#disqus_thread">Comments</a>
      
      <br/>
      <a class="label" href="/tags/%D0%B2%D1%81%D1%8F%D0%BA%D0%B0%D1%8F-%D0%B2%D1%81%D1%8F%D1%87%D0%B8%D0%BD%D0%B0">Всякая всячина</a><a class="label" href="/tags/%D1%8E%D0%BC%D0%BE%D1%80">Юмор</a>
      </span>
      
      Веселый тред на reddit.com: Как бы вы объяснили в чем состоит ваша работа человеку, который родился 1000 лет назад:
Marketing? I&rsquo;d just say I&rsquo;m a whore.
Using a self moving horseless cart I take Italian food to people who ask for it over vast distances.
Sorcery
Примерно каждый четвертый объявляется ведьмой и отправляется на костер:
I&rsquo;m a web developer working in aerospace. Fuck.
You create illuminated manuscripts displaying the glory of machines that fly through the air.
      <a href="https://blog.not-a-kernel-guy.com/2012/12/11/1441/">Read On &rarr;</a>
      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="https://blog.not-a-kernel-guy.com/2012/12/04/1437/">Трассировка описателей (AKA handle tracing)</a>
      </h1>
      <span class="post-date">Dec 4, 2012 &middot; <a href="https://blog.not-a-kernel-guy.com/2012/12/04/1437/#disqus_thread">Comments</a>
      
      <br/>
      <a class="label" href="/tags/%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D1%8B">Инструменты</a><a class="label" href="/tags/%D0%BD%D0%B5%D0%B4%D0%BE%D0%BA%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5-%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D0%B8">Недокументированные функции</a><a class="label" href="/tags/%D0%BE%D1%82%D0%BB%D0%B0%D0%B4%D0%BA%D0%B0">Отладка</a><a class="label" href="/tags/%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5">Программирование</a><a class="label" href="/tags/windows-kernel">Windows Kernel</a>
      </span>
      
      <p>Начиная с Windows XP в ядро встроена поддержка трассировки описателей ядра (AKA handle tracing). Включение трассировки имеет двойной эффект. Во-первых, все операции с ядерными описателями сохраняются в циклический буфер (откуда их можно потом прочитать). Во-вторых, при любой попытке использовать несуществующий описатель генерируется исключение STATUS_INVALID_HANDLE. Фактически, проверка корректности операций с описателями в <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/dd371695(v=vs.85).aspx">Application Verifier</a> - это тонкая обертка вокруг функций трассировки, предоставляемых ядром. Расширение отладчика !htrace - аналогично.</p>
      <a href="https://blog.not-a-kernel-guy.com/2012/12/04/1437/">Read On &rarr;</a>
      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="https://blog.not-a-kernel-guy.com/2012/10/22/1431/">Невероятно</a>
      </h1>
      <span class="post-date">Oct 22, 2012 &middot; <a href="https://blog.not-a-kernel-guy.com/2012/10/22/1431/#disqus_thread">Comments</a>
      
      <br/>
      <a class="label" href="/tags/%D0%BA%D0%BE%D1%81%D0%BC%D0%BE%D1%81">Космос</a><a class="label" href="/tags/%D1%82%D0%B5%D1%85%D0%BD%D0%B8%D0%BA%D0%B0">Техника</a><a class="label" href="/tags/space-shuttle">Space shuttle</a>
      </span>
      
      Шаттл на улицах Лос-Анджелеса:
Очень красиво!
      
      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="https://blog.not-a-kernel-guy.com/2012/10/17/1423/">Там, где живет интернет</a>
      </h1>
      <span class="post-date">Oct 17, 2012 &middot; <a href="https://blog.not-a-kernel-guy.com/2012/10/17/1423/#disqus_thread">Comments</a>
      
      <br/>
      <a class="label" href="/tags/%D0%B4%D0%B0%D1%82%D0%B0%D1%86%D0%B5%D0%BD%D1%82%D1%80">датацентр</a><a class="label" href="/tags/google">Google</a>
      </span>
      
      Первая, как утверждается, фотосессия датацентра Google:
Прямая ссылка: Where the Internet lives.
      
      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="https://blog.not-a-kernel-guy.com/2012/09/25/1417/">Overclocking и его последствия</a>
      </h1>
      <span class="post-date">Sep 25, 2012 &middot; <a href="https://blog.not-a-kernel-guy.com/2012/09/25/1417/#disqus_thread">Comments</a>
      
      <br/>
      <a class="label" href="/tags/%D0%BE%D1%82%D0%BB%D0%B0%D0%B4%D0%BA%D0%B0">Отладка</a><a class="label" href="/tags/%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5">Программирование</a><a class="label" href="/tags/%D1%8E%D0%BC%D0%BE%D1%80">Юмор</a>
      </span>
      
      <p>А сегодня мы с вами прослушаем лекцию о том, как избежать появления растительности на ладонях и чем её потом выводить&hellip;</p>
<p>Разбор crash dump-ов твоего приложения, собранных с пользовательских машин - занятие и увлекательное, и поучительное. Поучительное не столько потому, что демонстрирует твои собственные успехи во всей красе, но потому что не менее красиво показывает достижения других. Одновременно испытываешь и неловкость за содеянное (нахомутал, чего уж там) и гордость (да не так уж и нахомутал - посмотрите, как другие отличились), и облегчение (все одим миром мазаны). А сегодня мы разберем одно из часто встречающихся явлений - overclocking.</p>
      <a href="https://blog.not-a-kernel-guy.com/2012/09/25/1417/">Read On &rarr;</a>
      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="https://blog.not-a-kernel-guy.com/2012/09/23/1412/">На тьму надейся, а сам не плошай</a>
      </h1>
      <span class="post-date">Sep 23, 2012 &middot; <a href="https://blog.not-a-kernel-guy.com/2012/09/23/1412/#disqus_thread">Comments</a>
      
      <br/>
      <a class="label" href="/tags/%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5">Программирование</a><a class="label" href="/tags/wix">WiX</a>
      </span>
      
      Для продукта, над которым я сейчас работаю, нужно было сделать инсталляцию под Windows. Установить несколько файлов, создать пару ключей в реестре, обновиться на более свежую версию,.. - как раз работа для WiX. WiX, - он, конечно, не без греха. Все-таки, это всего лишь обертка вокруг Windows Installer, чьё нетривиальное нутро то и дело дает о себе знать. Взять хотя-бы тот факт, что Windows Installer понимает черытех компонентный номер версии (a.b.c.d), но при сравнии номеров версий принимает во внимание только старшие три числа.
      <a href="https://blog.not-a-kernel-guy.com/2012/09/23/1412/">Read On &rarr;</a>
      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="https://blog.not-a-kernel-guy.com/2012/08/16/1405/">Ошибка в книге Windows Internals</a>
      </h1>
      <span class="post-date">Aug 16, 2012 &middot; <a href="https://blog.not-a-kernel-guy.com/2012/08/16/1405/#disqus_thread">Comments</a>
      
      <br/>
      <a class="label" href="/tags/%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5">Программирование</a><a class="label" href="/tags/process-explorer">Process Explorer</a><a class="label" href="/tags/windows-internals-book">Windows Internals book</a><a class="label" href="/tags/windows-kernel">Windows Kernel</a><a class="label" href="/tags/wow64">Wow64</a>
      </span>
      
      В новой редакции Windows Internals обнаружился старый-знакомый баг. Там приводится пример стека 32-х битной нити, выполняющейся под Wow64:
Иллюстрация сопровождается комментарием:
An example of a Wow64 thread inside Microsoft Office Word 2007 is shown in Figure 5-13. The highlighted stack frame and all stack frames below it are the 32-bit stack frames from the 32-bit stack. The stack frames above the highlighted frame are on the 64-bit stack.
Что не совсем верно.
      <a href="https://blog.not-a-kernel-guy.com/2012/08/16/1405/">Read On &rarr;</a>
      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="https://blog.not-a-kernel-guy.com/2012/07/14/1399/">Про фонетику</a>
      </h1>
      <span class="post-date">Jul 14, 2012 &middot; <a href="https://blog.not-a-kernel-guy.com/2012/07/14/1399/#disqus_thread">Comments</a>
      
      <br/>
      <a class="label" href="/tags/%D1%80%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9">русский</a><a class="label" href="/tags/%D1%84%D0%BE%D0%BD%D0%B5%D1%82%D0%B8%D0%BA%D0%B0">фонетика</a>
      </span>
      
      Существует мнение, что “в русском языке слова читаются точно так же, как и пишутся”. Ага, щас! Вы пробовали своего ребенка учить читать? “Карова”. Нет, доченька. Пишеться “о”, но читается “а”. Почему? Гм. Ну, как тебе объяснить?.. А мама говорит “корова”? Просто мама говорит по-украински, а там нет правила про безударную “о”. С кем это я сейчас говорил? Не обращай внимания, просто запомни - у папы “карова”, а у мамы - “корова”.
      <a href="https://blog.not-a-kernel-guy.com/2012/07/14/1399/">Read On &rarr;</a>
      
    </div>
    
    <ul class="pagination">
  <li class="active">
    <span class="fa-lg"><a href="/page/20/" aria-label="Previous">
        <i class="fa fa-arrow-left" aria-hidden="true"></i>&nbsp;Новое
      </a></span>
  </li>

  <li class="active">
    <span class="fa-lg">
      <a href="/post/">Архив</a>
    <span>
  </li>

  <li class="active">
    <span class="fa-lg"><a href="/page/22/" aria-label="Next">
        Старое&nbsp;<i class="fa fa-arrow-right" aria-hidden="true"></i>
      </a></span>
  </li>
</ul>

  </div>
</div>


<script type="text/javascript">
var disqus_shortname = "alexeypa";
(function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>

<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>

